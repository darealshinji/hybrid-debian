PREFIX ?= $(prefix)

bindir    = $(DESTDIR)$(PREFIX)/bin
appdir    = $(DESTDIR)$(PREFIX)/share/applications
commondir = $(DESTDIR)$(PREFIX)/share/hybrid-common
iconsdir  = $(DESTDIR)$(PREFIX)/share/icons/hicolor
man1dir   = $(DESTDIR)$(PREFIX)/share/man/man1


all:

install:
	install -d $(bindir)
	install -d $(appdir)
	install -d $(commondir)
	install -d $(man1dir)
	install -m755 -D hybrid $(bindir)
	install -m755 -D hybrid-qt5 $(bindir)
	install -m755 -D install-hybrid.sh $(commondir)
	install -m644 -D run-hybrid $(commondir)
	install -m644 -D hybrid.desktop $(appdir)
	install -m644 -D hybrid-qt5.desktop $(appdir)
	install -m644 -D hybrid-encoder.1 $(man1dir)
	$(foreach SIZE, 16 22 24 32 48 64 96 128 256,\
	  install -d $(iconsdir)/$(SIZE)x$(SIZE)/apps ;\
	  install -m644 -D icons/$(SIZE)x$(SIZE)/apps/hybrid-encoder.png \
	  $(iconsdir)/$(SIZE)x$(SIZE)/apps/hybrid-encoder.png ;)
	gzip -f9 $(man1dir)/hybrid-encoder.1
	ln -fs hybrid-encoder.1.gz $(man1dir)/hybrid.1.gz
	ln -fs hybrid-encoder.1.gz $(man1dir)/hybrid-qt5.1.gz

clean:
	rm -f Makefile hybrid hybrid-qt5

